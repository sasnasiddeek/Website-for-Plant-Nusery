(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{"/xGf":function(t,e,n){t.exports=n("4e1j")},"0N1A":function(t,e){var n,r,i,a,o,s,c,u,p,d,l,h,f,g,m,y=!1;function b(){if(!y){y=!0;var t=navigator.userAgent,e=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(t),b=/(Mac OS X)|(Windows)|(Linux)/.exec(t);if(h=/\b(iPhone|iP[ao]d)/.exec(t),f=/\b(iP[ao]d)/.exec(t),d=/Android/i.exec(t),g=/FBAN\/\w+;/i.exec(t),m=/Mobile/i.exec(t),l=!!/Win64/.exec(t),e){(n=e[1]?parseFloat(e[1]):e[5]?parseFloat(e[5]):NaN)&&document&&document.documentMode&&(n=document.documentMode);var v=/(?:Trident\/(\d+.\d+))/.exec(t);s=v?parseFloat(v[1])+4:n,r=e[2]?parseFloat(e[2]):NaN,i=e[3]?parseFloat(e[3]):NaN,(a=e[4]?parseFloat(e[4]):NaN)?(e=/(?:Chrome\/(\d+\.\d+))/.exec(t),o=e&&e[1]?parseFloat(e[1]):NaN):o=NaN}else n=r=i=o=a=NaN;if(b){if(b[1]){var O=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(t);c=!O||parseFloat(O[1].replace("_","."))}else c=!1;u=!!b[2],p=!!b[3]}else c=u=p=!1}}var v={ie:function(){return b()||n},ieCompatibilityMode:function(){return b()||s>n},ie64:function(){return v.ie()&&l},firefox:function(){return b()||r},opera:function(){return b()||i},webkit:function(){return b()||a},safari:function(){return v.webkit()},chrome:function(){return b()||o},windows:function(){return b()||u},osx:function(){return b()||c},linux:function(){return b()||p},iphone:function(){return b()||h},mobile:function(){return b()||h||f||d||m},nativeApp:function(){return b()||g},android:function(){return b()||d},ipad:function(){return b()||f}};t.exports=v},"0itG":function(t,e,n){"use strict";var r=n("D57K"),i=n("5xGT"),a=(n("hX56"),n("4y1S")),o=n("nsO7"),s=n("LiEJ"),c=n("gQst"),u=n("pN2L"),p=n("3riI"),d=n("AouM"),l=n("z5yO"),h=n("Jg5f"),f=n("lqvn"),g=n("D3kC"),m=n("c7W3"),y=(n("QoSw"),n("SBw3"),n("2m+3"),n("AaYA")),b=n("yhNa"),v=n("LC7v"),O=n("QCJn"),x=n("TQyE"),j=n("IGWl"),S=n("g3Dv"),C=n("fQLH"),P=n("cQOC"),T=n("NNJu"),w=n("U3QC"),D=n("12aA"),I=n("G2Mx"),F=n("myrl"),E=function(t){function e(e,n,r,i){var a=t.call(this,e,i)||this;return a.componentFactoryResolver=e,a.featureList=n,a.commandService=r,a.injector=i,a.items={},a.changeSubs={},a._change=new C.a,a.change.subscribe(function(t){return a.handleFeatureChange(t)}),a.resetOperations(),a}return r.d(e,t),Object.defineProperty(e.prototype,"change",{get:function(){return this._change.asObservable()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"itemIds",{get:function(){return Object.keys(this.items)},enumerable:!0,configurable:!0}),e.prototype.addItem=function(t,e,n,r,i){var a=this.makeComponent(n);a.instance.id=t,a.instance.setData(r),a.instance.setProperties(i),a.instance.apply(),this.operations.add.push({item:a,container:e})},e.prototype.removeItem=function(t){this.items[t]&&this.items[t].item&&this.operations.remove.push(t)},e.prototype.updateItem=function(t,e,n){if(this.items[t]&&this.items[t].item){var r=this.items[t].item;r.instance.setData(e),r.instance.setProperties(n),this.operations.update.push(t)}},e.prototype.apply=function(t){var e=this,n=this.getPendingOperations(t);return n.length>0?P.a.apply(void 0,r.j(n)).pipe(Object(w.a)({complete:function(){e.resetOperations()}})):(this.resetOperations(),Object(u.a)({}))},e.prototype.getPendingOperations=function(t){var e=this,n=[];return this.operations.remove.length>0&&(n=n.concat(this.operations.remove.map(function(n){return e.removeFeatureItem(n,t)}))),this.operations.add.length>0&&(n=n.concat(this.operations.add.map(function(n){return e.insertFeatureItem(n.item,n.container,t)}))),this.operations.update.length>0&&(n=n.concat(this.operations.update.map(function(n){return e.updateFeatureItem(n,t)}))),n},e.prototype.insertFeatureItem=function(t,e,n){if(!this.items[t.instance.id]){if(this.items[t.instance.id]={item:t,container:e},this.subscribeToItemChange(t.instance),n){var r=this.getAddItemAnimation(t);return this.insert(e,t),t.changeDetectorRef.detectChanges(),r.start()}this.insert(e,t),t.changeDetectorRef.detectChanges()}return Object(u.a)({})},e.prototype.getItem=function(t){if(this.items&&this.items[t]){var e=this.items[t].item;if(e)return e.instance}},e.prototype.removeFeatureItem=function(t,e){var n=this;if(!this.items[t])return Object(u.a)({});var r=this.items[t].item,i=this.items[t].container;if(r){if(this.unsubscribeFromItemChange(t),e)return this.getRemoveItemAnimation(r).start().pipe(Object(w.a)({complete:function(){n.remove(i,r),delete n.items[t]}}));this.remove(i,r),delete this.items[t]}return Object(u.a)({})},e.prototype.updateFeatureItem=function(t,e){if(this.items[t]&&this.items[t].item){var n=this.items[t].item;if(e)return n.instance.applyAnimated();n.instance.apply()}return Object(u.a)({})},e.prototype.resetOperations=function(){this.operations={add:[],remove:[],update:[]}},e.prototype.subscribeToItemChange=function(t){var e=this,n=t.change.subscribe(function(n){return e._change.next({id:t.id,data:n})});this.changeSubs[t.id]=n},e.prototype.unsubscribeFromItemChange=function(t){this.changeSubs[t]&&(this.changeSubs[t].unsubscribe(),delete this.changeSubs[t])},e.prototype.getAddItemAnimation=function(t){var e=new T.a({});return e.element=t.location.nativeElement,e},e.prototype.getRemoveItemAnimation=function(t){var e=new T.a({});return e.element=t.location.nativeElement,e},e.prototype.ngOnDestroy=function(){var t=this;Object.keys(this.changeSubs).forEach(function(e){t.changeSubs[e].unsubscribe()}),this._change.complete(),this.changeSubs=null,this.items=null,this.operations=null},e.prototype.renderFeatureChanges=function(t,e){var n=this;return this.features.pipe(Object(h.a)(function(e){return e.filter(function(e){return t.includes(e.featureId)})}),Object(d.a)(function(r){return n.manage(t,r,e).pipe(Object(D.a)(r))}),Object(d.a)(function(t){return n.apply(!0).pipe(Object(D.a)(t))}))},e.prototype.manage=function(t,e,n){return Object(P.a)(this.removeComponents(t,e),this.updateComponents(e),this.addComponents(e,n)).pipe(Object(I.a)(1))},e.prototype.removeComponents=function(t,e){var n=this;return t.filter(function(t){return-1===e.map(function(t){return t.featureId}).indexOf(t)}).forEach(function(t){return n.removeItem(t)}),Object(u.a)({})},e.prototype.addComponents=function(t,e){var n=this,i=[];return t.forEach(function(t,r){-1===n.itemIds.indexOf(t.featureId)&&i.push(n.addComponent(t,e))}),Object(o.isEmpty)(i)?Object(u.a)({}):c.a.apply(void 0,r.j(i))},e.prototype.updateComponents=function(t){var e=this,n=[];return t.forEach(function(t,r){e.itemIds.includes(t.featureId)&&n.push(e.updateComponent(t))}),Object(o.isEmpty)(n)?Object(u.a)({}):c.a.apply(void 0,r.j(n))},e.prototype.updateComponent=function(t){var e=this,n=this.featureList.getFeature(t.featureId),r=this.getUIControlProperties(n);return this.getItemData(n,t.data).pipe(Object(h.a)(function(n){return e.updateItem(t.featureId,n,r)}))},e.prototype.addComponent=function(t,e){var n=this,r=this.featureList.getFeature(t.featureId),i=this.getUIControlType(r.dataType),a=this.getUIControlProperties(r);return this.getItemData(r,t.data).pipe(Object(h.a)(function(r){return n.addItem(t.featureId,e,i,r,a)}))},e.prototype.getUIControlProperties=function(t){return{id:t.id,icon:t.icon,label:t.label,labelPosition:t.labelPosition,dropdownDirection:t.dropdownDirection,tooltip:t.tooltip}},e.prototype.getUIControlType=function(t){if(!t||t===S.c.BINARY)return j.a;if(t===S.c.TEXT_POSITION)return y.a;if(t===S.c.OPTION_LIST_COMBO)return O.a;if(t===S.c.COLOR)return x.a;if(t===S.c.NUMBER)return b.a;if(t===S.c.OPTION_LIST)return v.a;if(t===S.c.CUSTOM_SHAPE_STYLE)return F.a;throw new Error("UI control is not available for "+t)},e.prototype.getItemData=function(t,e){if(t.transformer)return this.injector.get(t.transformer).getFeatureData(t.id,e);if(t.dataType===S.c.OPTION_IMAGES)throw new Error("Features with list type data items must have a transformer defined.");return e?Object(u.a)(i.j.mergeInstances({},t.data,e)):Object(u.a)(t.data)},e.prototype.handleFeatureChange=function(t){var e=this,n=this.featureList.getFeature(t.id);if(n.transformer){this.injector.get(n.transformer).getApplyData(n.id,t.data).subscribe(function(t){e.commandService.dispatch(n.commandEvent,t)})}else{var r=i.j.mergeInstances({},this.getCommandData(t.id),t.data);this.commandService.dispatch(n.commandEvent,r)}},e.prototype.getCommandData=function(t){var e={},n=this.getItem(t);return n&&n.data&&(n.data.dataItemId&&(e.dataItems=[{id:n.data.dataItemId,value:n.data.value}]),n.data.alterFunction&&(e.alterFunction=n.data.alterFunction)),e},e}(T.d);n.d(e,"a",function(){return A});var A=function(t){function e(e,n,r,i,a,o,c,u,p){var d=t.call(this,a,c,i,o)||this;return d.state=e,d.ll=n,d.gridService=r,d.commandService=i,d.componentFactoryResolver=a,d.injector=o,d.featureList=c,d.dataStore=u,d.translator=p,d.selectionXFeature=["selectionPositionX"],d.selectionYFeature=["selectionPositionY"],d.selectionWidthFeature=["selectionWidth"],d.selectionHeightFeature=["selectionHeight"],d.connectorStartXFeature=["connectorStartX"],d.connectorStartYFeature=["connectorStartY"],d.connectorEndXFeature=["connectorEndX"],d.connectorEndYFeature=["connectorEndY"],d.selectionAngleFeature=["selectionAngle"],d.textFeaturesBISU=["boldModelText","italicModelText","underlineModelText","strikeoutModelText"],d.textFeaturesAlign=["leftAlignModelText","centerAlignModelText","rightAlignModelText"],d.textFeatureFont=["fontModelText"],d.textFeatureSize=["sizeModelText"],d.textFeatureColor=["colorModelText"],d.textFeatureTextPosition=["textPosition"],d.styleFeatureColor=["colorFill","colorLine","customShapeStyles"],d.styleFeatureLineStyle=["styleLine"],d.styleFeatureLineThickness=["lineThickness"],d.features=new s.a([]),d.subs=[],d._panelName=d.panelName(),d._selection=d.state.changes("Selected"),d}return r.d(e,t),Object.defineProperty(e,"openForContextAware",{get:function(){return"onlyAll"},enumerable:!0,configurable:!0}),e.prototype.ngAfterViewInit=function(){var t=this;this.subs.push(Object(c.a)(this.renderFeatureChanges(this.textFeaturesBISU,this.textSectionBISU),this.renderFeatureChanges(this.textFeaturesAlign,this.textSectionAlign),this.renderFeatureChanges(this.textFeatureSize,this.textSectionSize),this.renderFeatureChanges(this.textFeatureFont,this.textSectionFont),this.renderFeatureChanges(this.textFeatureColor,this.textSectionColor),this.renderFeatureChanges(this.textFeatureTextPosition,this.textSectionTextPosition)).subscribe(function(){return t.manageSectionVisiblity(t.textSection,[{group:t.textSectionPanelItemBISUAlign,items:[t.textSectionBISU,t.textSectionAlign]},{group:t.textSectionPanelItemFontSize,items:[t.textSectionSize,t.textSectionFont]},{group:t.textSectionPanelItemColor,items:[t.textSectionColor]},{group:t.textSectionPanelTextPosition,items:[t.textSectionTextPosition]}])}),Object(c.a)(this.renderFeatureChanges(this.styleFeatureColor,this.styleSectionColors),this.renderFeatureChanges(this.styleFeatureLineStyle,this.styleSectionLineStyle),this.renderFeatureChanges(this.styleFeatureLineThickness,this.styleSectionLineThickness)).subscribe(function(){return t.manageSectionVisiblity(t.styleSection,[{group:t.styleSectionPanelItemColors,items:[t.styleSectionColors]},{group:t.styleSectionPanelItemStyleThickness,items:[t.styleSectionLineStyle,t.styleSectionLineThickness]}])}),Object(c.a)(this.renderFeatureChanges(this.selectionXFeature,this.selectionX),this.renderFeatureChanges(this.selectionYFeature,this.selectionY),this.renderFeatureChanges(this.selectionWidthFeature,this.selectionWidth),this.renderFeatureChanges(this.selectionHeightFeature,this.selectionHeight),this.renderFeatureChanges(this.selectionAngleFeature,this.selectionAngle),this.renderFeatureChanges(this.connectorStartXFeature,this.connectorStartX),this.renderFeatureChanges(this.connectorStartYFeature,this.connectorStartY),this.renderFeatureChanges(this.connectorEndXFeature,this.connectorEndX),this.renderFeatureChanges(this.connectorEndYFeature,this.connectorEndY)).subscribe(function(){t.manageSectionVisiblity(t.sizeAndPosSection,[{group:t.sizeAndPosPanelItemXY,items:[t.selectionX,t.selectionY]},{group:t.sizeAndPosPanelItemWH,items:[t.selectionWidth,t.selectionHeight]},{group:t.sizeAndPosPanelItemA,items:[t.selectionAngle]},{group:t.sizeAndPosPanelItemConStartXY,items:[t.connectorStartX,t.connectorStartY]},{group:t.sizeAndPosPanelItemConEndXY,items:[t.connectorEndX,t.connectorEndY]}])}),this.features.subscribe(function(e){t.setDiagramFeaturesVisibility(Object(o.isEmpty)(e))}))},e.prototype.panelName=function(){var t=this;return this.ll.forCurrentObserver(!1).pipe(Object(d.a)(function(){return t.state.changes("Selected").pipe(Object(l.a)(function(t){return!Object(o.isEmpty)(t)}),Object(d.a)(function(e){return t.getDocumentChanges(e).pipe(Object(h.a)(function(t){var n,r=[],i=[],a=[],o="";return e.forEach(function(e){var n=t.getShape(e);n.isConnector()?n.isLine()?i.push(n):r.push(n):a.push(n)}),i.length>0&&0===a.length&&0===r.length?n=1===i.length?"Line":i.length+" Lines Selected":r.length>0&&0===a.length&&0===i.length?1===r.length?(n="Connector",o=r[0].name):(n=r.length+" Connectors Selected",o=""):n=a.length>0&&0===r.length&&0===i.length?1===a.length?a[0].name:a.length+" Shapes Selected":r.length+a.length+i.length+" Shapes Selected",{mainText:n,subText:o}}))}))}))},e.prototype.getDocumentChanges=function(t){var e=this.ll.forCurrent(!1);return e.getDiagramOnce().pipe(Object(d.a)(function(n){return 1!==t.length?Object(u.a)(n):Object(c.a)(Object(u.a)(n),e.getDiagramChanges().pipe(Object(h.a)(function(t){return t.model}),Object(l.a)(function(e){var n=e.shapes[t[0]];return n&&n.isConnector()})))}))},e.prototype.ngOnDestroy=function(){for(;this.subs.length>0;)this.subs.pop().unsubscribe()},e.prototype.manageSectionVisiblity=function(t,e){var n=t.nativeElement;n.style.display="none",e.forEach(function(t){var e=t.group.nativeElement;t.items.every(function(t){return 0===t.length})?e.style.display="none":(e.style.display="",n.style.display="")})},e.prototype.setDiagramFeaturesVisibility=function(t){var e=this.gridSection.nativeElement,n=this.diagramInfoSection.nativeElement;t?(e.style.display="",n.style.display=""):(e.style.display="none",n.style.display="none")},Object.defineProperty(e.prototype,"id",{get:function(){return"diagraminfo"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"icon",{get:function(){return"properties"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tooltip",{get:function(){return this.translator.instant("TOOLTIPS.DIAGRAM_INFO")},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){this.diagram||(this.diagram=this.getDiagramObservable())},e.prototype.getDiagramObservable=function(){var t=this;return this.ll.forCurrentObserver(!1).pipe(Object(d.a)(function(t){return t.getDiagramModel()}),Object(d.a)(function(e){var n=t.dataStore.findOne(a.e,{id:e.updatedBy}).pipe(Object(h.a)(function(t){return t&&t.firstName?t:{firstName:"Someone"}}));return Object(p.b)(Object(u.a)(e),n)}),Object(h.a)(function(e){var n=r.h(e,2),i=n[0],a=n[1],o=i.getBounds();return{description:i.description,tagsArray:i.tagsArray,width:Math.round(o.width),height:Math.round(o.height),typeName:i.typeName?i.typeName:"Block Diagram",updatedBy:a.firstName,updatedDate:t.translator.instant("LABELS.UPDATED_THIS")+" "+i.lastUpdatedMoment()}}),Object(f.a)(function(t,e){return Object(o.isEqual)(t,e)}),Object(g.a)())},e.prototype.onActive=function(){this.diagram||(this.diagram=this.getDiagramObservable()),this.diagramSub=this.diagram.connect(),i.db.track("right.info.panel.click",{value1Type:"status",value1:"open"})},e.prototype.onInactive=function(){i.db.track("right.info.panel.click",{value1Type:"status",value1:"close"}),this.diagramSub.unsubscribe()},e.prototype.updateDescription=function(t){i.db.track("right.info.description.change"),this.commandService.dispatch(m.a.updateDiagramInfo,{description:t})},e.prototype.updateTags=function(t){i.db.track("right.info.tags.update",{value1Type:"tags",value1:t}),this.commandService.dispatch(m.a.updateDiagramInfo,{tags:t})},Object.defineProperty(e.prototype,"uiState",{get:function(){return this.state.changes("InterfaceControlState")},enumerable:!0,configurable:!0}),e.prototype.showGrid=function(t){var e=t?"true":"false";i.db.track("right.info.grid."+e),this.gridService.showGrid.value!==t&&this.gridService.showGrid.next(t)},e.prototype.snapToGrid=function(t){var e=t?"true":"false";i.db.track("right.info.snap."+e),this.gridService.enableSnapToGrid.value!==t&&this.gridService.enableSnapToGrid.next(t)},e}(E)},"2m+3":function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("D57K"),i=n("LiEJ"),a=n("ADlH"),o=function(){function t(){this.enableSnapToGrid=new i.a(!0),this.showGrid=new i.a(!0),this.gridSizeMajor=5*t.gridSize}return t.prototype.isOnGrid=function(e){return e%t.gridSize==0},t.prototype.isOnGridMajor=function(t){return t%this.gridSizeMajor==0},t.prototype.snapToGrid=function(e){return Object(a.roundN)(e,t.gridSize)},t.prototype.snapToGridNext=function(e){return Object(a.ceilN)(e,t.gridSize)},t.prototype.snapToGridPrevious=function(e){return Object(a.floorN)(e,t.gridSize)},t.prototype.getGridLines=function(e,n){var i,a;return r.e(this,function(r){switch(r.label){case 0:if(e===n)throw Error("Start and end of the grid line location cant be same");i=e<n?t.gridSize:-t.gridSize,a=e,this.isOnGrid(e)||(a=i>0?this.snapToGridNext(e):this.snapToGridPrevious(e)),r.label=1;case 1:return i>0&&a<n||i<0&&a>n?[4,a]:[3,3];case 2:return r.sent(),a+=i,[3,1];case 3:return[2]}})},t.prototype.point=function(t){return this.enableSnapToGrid.value&&(t.x=this.adjustToGrid(t.x),t.y=this.adjustToGrid(t.y)),t},t.prototype.shapeTransform=function(t,e){return e},t.prototype.connectorPoints=function(t,e){return e},t.prototype.adjustToGrid=function(e){return e.value=Math.round(e.value),this.isOnGrid(e.value)?(this.adjustToGridProperty("low",e),this.adjustToGridProperty("high",e),e):0===e.low?(e.value=this.snapToGridNext(e.value),this.adjustToGridProperty("high",e)):0===e.high?(e.value=this.snapToGridPrevious(e.value),this.adjustToGridProperty("low",e)):(e.low<=t.gridSize&&e.high<=t.gridSize?e.value=this.snapToGrid(e.value):e.low>t.gridSize&&e.high>t.gridSize?e.low<e.high?e.value=this.snapToGridPrevious(e.value-e.low):e.value=this.snapToGridNext(e.value+e.high):e.low>t.gridSize?e.value=this.snapToGridNext(e.value):e.high>t.gridSize&&(e.value=this.snapToGridPrevious(e.value)),this.adjustToGridProperty("low",e),this.adjustToGridProperty("high",e),e)},t.prototype.adjustToGridProperty=function(e,n){return 0===n[e]?n:(n[e]<=t.gridSize?n[e]=t.gridSize:n[e]=this.snapToGridNext(n[e]),n)},t.gridSize=10,t}()},"3+4Q":function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("D57K"),i=n("5xGT"),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.d(e,t),e.prototype.isDeleted=function(){return!!this.deleted},e.prototype.isEdited=function(){return!!this.edited},e.prototype.isNew=function(){return!1},e.prototype.getTime=function(){return""+i.w.formatDistance(this.added,(new Date).getTime())},e}(i.f)},"4e1j":function(t,e,n){"use strict";var r=n("0N1A"),i=n("4kdB"),a=10,o=40,s=800;function c(t){var e=0,n=0,r=0,i=0;return"detail"in t&&(n=t.detail),"wheelDelta"in t&&(n=-t.wheelDelta/120),"wheelDeltaY"in t&&(n=-t.wheelDeltaY/120),"wheelDeltaX"in t&&(e=-t.wheelDeltaX/120),"axis"in t&&t.axis===t.HORIZONTAL_AXIS&&(e=n,n=0),r=e*a,i=n*a,"deltaY"in t&&(i=t.deltaY),"deltaX"in t&&(r=t.deltaX),(r||i)&&t.deltaMode&&(1==t.deltaMode?(r*=o,i*=o):(r*=s,i*=s)),r&&!e&&(e=r<1?-1:1),i&&!n&&(n=i<1?-1:1),{spinX:e,spinY:n,pixelX:r,pixelY:i}}c.getEventType=function(){return r.firefox()?"DOMMouseScroll":i("wheel")?"wheel":"mousewheel"},t.exports=c},"4kdB":function(t,e,n){"use strict";var r,i=n("c3EF");i.canUseDOM&&(r=document.implementation&&document.implementation.hasFeature&&!0!==document.implementation.hasFeature("","")),t.exports=function(t,e){if(!i.canUseDOM||e&&!("addEventListener"in document))return!1;var n="on"+t,a=n in document;if(!a){var o=document.createElement("div");o.setAttribute(n,"return;"),a="function"==typeof o[n]}return!a&&r&&"wheel"===t&&(a=document.implementation.hasFeature("Events.wheel","3.0")),a}},AaYA:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("fQLH"),i=n("LiEJ"),a=n("d9YI"),o=function(){function t(){this._change=new r.a,this.selectedElement=new i.a("none")}return Object.defineProperty(t.prototype,"data",{get:function(){return this._data},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"change",{get:function(){return this._change},enumerable:!0,configurable:!0}),t.prototype.setData=function(t){this.selectedElement.next(this.getTextPositionString(t)),this._data=t},t.prototype.setProperties=function(t){},t.prototype.apply=function(){},t.prototype.applyAnimated=function(){return Object(a.b)()},t.prototype.handleClick=function(t){this._change.next(this.getDataPositionData(t))},t.prototype.getTextPositionString=function(t){var e=t.xType,n=t.yType,r=t.x,i=t.y,a=t.alignX,o=t.alignY;return"fixed-start"===e&&r>=0&&"fixed-start"===n&&i<=0&&-1===a&&1===o?"ex-top-left":"relative"===e&&.5===r&&"fixed-start"===n&&i<=0&&0===a&&1===o?"ex-top-center":"fixed-end"===e&&r>=0&&"fixed-start"===n&&i<=0&&1===a&&1===o?"ex-top-right":"fixed-start"===e&&r>=0&&"fixed-start"===n&&i>=0&&-1===a&&-1===o?"in-top-left":"relative"===e&&.5===r&&"fixed-start"===n&&i>=0&&0===a&&-1===o?"in-top-center":"fixed-end"===e&&r>=0&&"fixed-start"===n&&i>=0&&1===a&&-1===o?"in-top-right":"fixed-start"===e&&r>=0&&"relative"===n&&.5===i&&-1===a&&0===o?"in-center-left":"relative"===e&&.5===r&&"relative"===n&&.5===i&&0===a&&0===o?"in-center-center":"fixed-end"===e&&r>=0&&"relative"===n&&.5===i&&1===a&&0===o?"in-center-right":"fixed-start"===e&&r>=0&&"fixed-end"===n&&i>=0&&-1===a&&1===o?"in-bottom-left":"relative"===e&&.5===r&&"fixed-end"===n&&i>=0&&0===a&&1===o?"in-bottom-center":"fixed-end"===e&&r>=0&&"fixed-end"===n&&i>=0&&1===a&&1===o?"in-bottom-right":"fixed-start"===e&&r>=0&&"fixed-end"===n&&i<=0&&-1===a&&-1===o?"ex-bottom-left":"relative"===e&&.5===r&&"fixed-end"===n&&i<=0&&0===a&&-1===o?"ex-bottom-center":"fixed-end"===e&&r>=0&&"fixed-end"===n&&i<=0&&1===a&&-1===o?"ex-bottom-right":"fixed-start"===e&&r<=0&&"fixed-start"===n&&i>=0&&1===a&&-1===o?"ex-left-top":"fixed-end"===e&&r<=0&&"fixed-start"===n&&i>=0&&-1===a&&-1===o?"ex-right-top":"fixed-start"===e&&r<=0&&"relative"===n&&.5===i&&1===a&&0===o?"ex-left-center":"fixed-end"===e&&r<=0&&"relative"===n&&.5===i&&-1===a&&0===o?"ex-right-center":"fixed-start"===e&&r<=0&&"fixed-end"===n&&i>=0&&1===a&&1===o?"ex-left-bottom":"fixed-end"===e&&r<=0&&"fixed-end"===n&&i>=0&&-1===a&&1===o?"ex-right-bottom":"none"},t.prototype.getDataPositionData=function(t){return"ex-top-left"===t?{xType:"fixed-start",x:0,yType:"fixed-start",y:-1,alignX:-1,alignY:1,wordWrap:!1}:"ex-top-center"===t?{xType:"relative",x:.5,yType:"fixed-start",y:-1,alignX:0,alignY:1,wordWrap:!1}:"ex-top-right"===t?{xType:"fixed-end",x:0,yType:"fixed-start",y:-1,alignX:1,alignY:1,wordWrap:!1}:"in-top-left"===t?{xType:"fixed-start",x:1,yType:"fixed-start",y:1,alignX:-1,alignY:-1,wordWrap:!0}:"in-top-center"===t?{xType:"relative",x:.5,yType:"fixed-start",y:1,alignX:0,alignY:-1,wordWrap:!0}:"in-top-right"===t?{xType:"fixed-end",x:1,yType:"fixed-start",y:1,alignX:1,alignY:-1,wordWrap:!0}:"in-center-left"===t?{xType:"fixed-start",x:1,yType:"relative",y:.5,alignX:-1,alignY:0,wordWrap:!0}:"in-center-center"===t?{xType:"relative",x:.5,yType:"relative",y:.5,alignX:0,alignY:0,wordWrap:!0}:"in-center-right"===t?{xType:"fixed-end",x:1,yType:"relative",y:.5,alignX:1,alignY:0,wordWrap:!0}:"in-bottom-left"===t?{xType:"fixed-start",x:1,yType:"fixed-end",y:1,alignX:-1,alignY:1,wordWrap:!0}:"in-bottom-center"===t?{xType:"relative",x:.5,yType:"fixed-end",y:1,alignX:0,alignY:1,wordWrap:!0}:"in-bottom-right"===t?{xType:"fixed-end",x:1,yType:"fixed-end",y:1,alignX:1,alignY:1,wordWrap:!0}:"ex-bottom-left"===t?{xType:"fixed-start",x:0,yType:"fixed-end",y:-1,alignX:-1,alignY:-1,wordWrap:!1}:"ex-bottom-center"===t?{xType:"relative",x:.5,yType:"fixed-end",y:-1,alignX:0,alignY:-1,wordWrap:!1}:"ex-bottom-right"===t?{xType:"fixed-end",x:0,yType:"fixed-end",y:-1,alignX:1,alignY:-1,wordWrap:!1}:"ex-left-top"===t?{xType:"fixed-start",x:-1,yType:"fixed-start",y:0,alignX:1,alignY:-1,wordWrap:!1}:"ex-right-top"===t?{xType:"fixed-end",x:-1,yType:"fixed-start",y:0,alignX:-1,alignY:-1,wordWrap:!1}:"ex-left-center"===t?{xType:"fixed-start",x:-1,yType:"relative",y:.5,alignX:1,alignY:0,wordWrap:!1}:"ex-right-center"===t?{xType:"fixed-end",x:-1,yType:"relative",y:.5,alignX:-1,alignY:0,wordWrap:!1}:"ex-left-bottom"===t?{xType:"fixed-start",x:-1,yType:"fixed-end",y:0,alignX:1,alignY:1,wordWrap:!1}:"ex-right-bottom"===t?{xType:"fixed-end",x:-1,yType:"fixed-end",y:0,alignX:-1,alignY:1,wordWrap:!1}:void 0},t}()},IGWl:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("fQLH"),i=n("LiEJ"),a=n("d9YI"),o=function(){function t(){this._change=new r.a,this.iconSource=new i.a("")}return Object.defineProperty(t.prototype,"data",{get:function(){return this._data},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"change",{get:function(){return this._change.asObservable()},enumerable:!0,configurable:!0}),t.prototype.setData=function(t){this._data=t},t.prototype.setProperties=function(t){this._props=t},t.prototype.apply=function(){this._props.icon&&this.iconSource.next("./assets/icons/symbol-defs.svg#"+this._props.icon),this._data&&this.button&&(this._data.value?this.button.nativeElement.classList.add("active"):this.button.nativeElement.classList.remove("active"))},t.prototype.applyAnimated=function(){return this.apply(),Object(a.b)()},t}()},LC7v:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("D57K"),i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.d(e,t),e}(n("hSRu").a)},LLEj:function(t,e,n){"use strict";var r=n("D57K"),i=(n("Wpmq"),n("U3QC")),a=n("4HYP"),o=n("mhnT"),s=n("z5yO"),c=n("Jg5f"),u=n("AouM"),p=function(t){function e(e,n,r,i){void 0===r&&(r=!0),void 0===i&&(i=!0);var a=t.call(this,e,n,r,i)||this;return a.offsetX=n.nativeEvent.offsetX,a.offsetY=n.nativeEvent.offsetY,a.clientX=n.nativeEvent.clientX,a.clientY=n.nativeEvent.clientY,a}return r.d(e,t),e}(n("MvFr").a),d=function(t){function e(e,n,r,i){void 0===r&&(r=!0),void 0===i&&(i=!0);var a=t.call(this,e,n,r,i)||this;return a.setRelatedShape(n),a}return r.d(e,t),e}(p),l=n("ljsB"),h=n("5xGT"),f=n("gQst"),g=n("iUUs"),m=n("d62g"),y=n("5p5l"),b=n("pN2L"),v=n("/xGf");n.d(e,"a",function(){return O});var O=function(){function t(t,e){this.commandService=t,this.vToDcoordinate=e,this.zoomSensitivity=1/800,this.panSensitivity=.25,this.subs=[]}return t.prototype.initialize=function(t,e,n){var r=this;this.diagramCanvas=t,this.interactionCanvas=e,this.gridCanvas=n;var a=this.getStageWheelOnNoKeysDown().pipe(Object(i.a)(function(t){r.updatePan(-t.pixelX*r.panSensitivity,-t.pixelY*r.panSensitivity)})),o=this.getStageWheelOnCtrlKeyDown().pipe(Object(i.a)(function(t){return r.updateZoom(1-t.pixelY*r.zoomSensitivity,t.offsetX,t.offsetY)})),s=this.getAllCanvasMouseCapture().pipe(Object(i.a)(function(){return r.interactionCanvas.canvas.focus()}));return Object(f.a)(a,o,s)},t.prototype.destroy=function(){for(;this.subs.length>0;)this.subs.pop().unsubscribe();this.diagramCanvas=void 0,this.interactionCanvas=void 0,this.gridCanvas=void 0},t.prototype.getShapeTouch=function(){var t=this;return this.getShapes().pipe(Object(a.a)(function(e){return Object(g.a)(e,"mousedown").pipe(Object(o.a)(Object(g.a)(t.diagramCanvas,"childRemoved").pipe(Object(s.a)(function(t){return t.child===e}))))}),Object(c.a)(function(t){return t}))},t.prototype.getShapes=function(){var t=this;return Object(m.a)(Object(y.a)(0,this.diagramCanvas.numChildren).pipe(Object(c.a)(function(e){return t.diagramCanvas.getChildAt(e)})),Object(g.a)(this.diagramCanvas,"childAdded").pipe(Object(c.a)(function(t){return t.child})))},t.prototype.getShapeRightClick=function(){return this.getShapeTouch().pipe(Object(s.a)(function(t){return 2===t.nativeEvent.button}),Object(c.a)(function(t){return new d("shapeRightClick",t)}))},t.prototype.getAllCanvas=function(){return Object(b.a)(this.diagramCanvas,this.interactionCanvas,this.gridCanvas)},t.prototype.getAllCanvasMouseCapture=function(){return this.getAllCanvas().pipe(Object(a.a)(function(t){return Object(f.a)(Object(g.a)(t,"mousedown",{capture:!0}),Object(g.a)(t,"pressmove",{capture:!0}),Object(g.a)(t,"pressup",{capture:!0}))}),Object(c.a)(function(t){return t}))},t.prototype.getStageDrag=function(t){return Object(g.a)(t,"stagemousedown").pipe(Object(u.a)(function(){return Object(g.a)(t,"stagemousemove").pipe(Object(o.a)(Object(g.a)(t,"stagemouseup")))}),Object(c.a)(function(t){return t}))},t.prototype.getStageMouseDown=function(t){return Object(g.a)(t,"mousedown").pipe(Object(c.a)(function(t){return t}))},t.prototype.getStagePressUp=function(t){return Object(g.a)(t,"pressup").pipe(Object(c.a)(function(t){return t}))},t.prototype.getStageWheel=function(){return Object(g.a)(this.interactionCanvas.canvas,"wheel").pipe(Object(c.a)(function(t){var e=v(t);return t.pixelX=e.pixelX,t.pixelY=e.pixelY,t}),Object(i.a)(function(t){return t.preventDefault()}))},t.prototype.getStageWheelOnCtrlKeyDown=function(){return this.getStageWheel().pipe(Object(s.a)(function(t){return t.ctrlKey||t.metaKey}),Object(c.a)(function(t){return t}))},t.prototype.getStageWheelOnNoKeysDown=function(){return this.getStageWheel().pipe(Object(s.a)(function(t){return!t.metaKey&&!t.ctrlKey}),Object(c.a)(function(t){return t}))},t.prototype.getStageRightClick=function(t){return this.getStageMouseDown(t).pipe(Object(s.a)(function(t){return 2===t.nativeEvent.button}),Object(c.a)(function(t){return new p("canvasRightClick",t)}))},t.prototype.updatePan=function(t,e){this.commandService.dispatch(l.a.panDiagram,{dx:t,dy:e,animate:!1})},t.prototype.updateZoom=function(t,e,n){this.commandService.dispatch(l.a.zoomDiagram,{delta:t,toX:e,toY:n,animate:!1})},t.prototype.getCursor=function(){return Object(b.a)(this.defaultCursor)},t.prototype.getObjectsUnderPoint=function(t){return r.j(this.interactionCanvas.getObjectsUnderPoint(t.x,t.y,0),this.diagramCanvas.getObjectsUnderPoint(this.vToDcoordinate.x(t.x),this.vToDcoordinate.y(t.y),0)).filter(function(t){return!!t.getCursor})},t.prototype.getCursorByContext=function(t,e){var n=t.find(function(t){var n=t.getCursor(e);return n&&(!!n.cursor||!!n.tail)});return n?n.getCursor(e):this.defaultCursor},t.prototype.pointerMove=function(){return Object(g.a)(this.interactionCanvas,"stagemousemove").pipe(Object(c.a)(function(t){return{x:t.stageX,y:t.stageY}}))},t}();!function(t){function e(){return null!==t&&t.apply(this,arguments)||this}r.d(e,t)}(h.bb)},MvFr:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("D57K"),i=n("deqJ"),a=n("h1tj"),o=function(t){function e(e,n,r,i){void 0===r&&(r=!0),void 0===i&&(i=!0);var a=t.call(this,e,r,i)||this;return a.relatedMouseEvent=n,a.relatedShape=n.target,a}return r.d(e,t),e.prototype.setRelatedShape=function(t){if(t.target instanceof i.a)this.relatedShape=t.target;else if(t.currentTarget instanceof i.a)this.relatedShape=t.currentTarget;else for(var e=t.target;e&&e.parent;){if(e.parent instanceof i.a){this.relatedShape=e.parent;break}e=e.parent}},e}(a.Event)},O6K7:function(t,e,n){"use strict";n.d(e,"b",function(){return r}),n.d(e,"a",function(){return o});var r,i=n("D57K"),a=n("MvFr");!function(t){t.CreateComment="create-comment"}(r||(r={}));var o=function(t){function e(e,n){var r=t.call(this,e,n,!0,!0)||this;return r.relatedShape=null,r.setRelatedShape(n),r}return i.d(e,t),e.prototype.getShapeId=function(){return this.relatedShape?this.relatedShape.name:null},e.prototype.getPosition=function(){return{x:this.relatedMouseEvent.stageX,y:this.relatedMouseEvent.stageY}},e}(a.a)},QCJn:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("D57K"),i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.d(e,t),e}(n("hSRu").a)},"S83/":function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n("D57K"),i=n("h1tj"),a=n("d9YI"),o=n("nsO7"),s=n("fQLH"),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.d(e,t),e.get=function(t,n,r,a){return a&&i.Tween.removeTweens(t),new e(t,n,r)},e.simulate=function(t){return this.get(t)},e.prototype.to=function(e,n,r){return t.prototype.to.call(this,e,n,r),this.propNames=Object.keys(e),this},e.prototype.cancel=function(){this.completed||(this.removeFromTweens(),this.clear())},Object.defineProperty(e.prototype,"completed",{get:function(){return this.position>=this.duration},enumerable:!0,configurable:!0}),e.prototype.changes=function(){var t=this;return this._progress?this._progress:this.completed?Object(a.b)():(this._progress=new s.a,this.addEventListener("change",function(){t._progress.next(Object(o.pick)(t.target,t.propNames))}),this.call(function(){t._progress.next(Object(o.pick)(t.target,t.propNames)),t.clear()}),this._progress)},e.prototype.removeFromTweens=function(){var t=i.Tween._tweens,e=t.indexOf(this);e>-1&&t.splice(e,1),this._paused=!0},e.prototype.clear=function(){this._progress&&(this._progress.complete(),this.removeAllEventListeners("change"),this._progress=void 0)},e}(i.Tween)},SKSx:function(t,e,n){"use strict";n.d(e,"b",function(){return s}),n.d(e,"a",function(){return c});var r=n("D57K"),i=n("h1tj"),a=n("g3Dv"),o=n("C0rp"),s=function(t){function e(e,n,r,i,a,o){var s=t.call(this)||this;return s.value=e,s.text=n,s.width=a,s.height=o,s.graphics.clear(),s.graphics.beginFill("rgba(0,0,0,0.01)"),s.graphics.drawRect(0,0,s.width,s.height),s.graphics.endFill(),s.x=r,s.y=i,s}return r.d(e,t),e.prototype.getCursor=function(t){return{cursor:"pointer",tail:null,type:"css"}},e}(i.Shape),c=function(t){function e(e,n){var r=t.call(this)||this;r.text=e,r.origin=n;var i=o.document(a.b);return i.load(e.content),i.width(e.width),i.getLinksData().forEach(function(t){var e=new s(t.value,t.text,t.x,t.y,t.width,t.height);r.addChild(e)}),r}return r.d(e,t),e.prototype.destroy=function(){},e}(i.Container)},T4Sa:function(t,e,n){"use strict";n.d(e,"a",function(){return v});var r=n("D57K"),i=n("3+4Q"),a=n("5xGT"),o=n("c7W3"),s=n("yn08"),c=n("3riI"),u=n("pN2L"),p=n("iUUs"),d=n("U3QC"),l=n("Jg5f"),h=n("AouM"),f=n("z5yO"),g=n("G2Mx"),m=n("g3Dv"),y=(n("hX56"),n("4y1S"),n("nsO7")),b=n("ljsB"),v=function(){function t(t,e,n,r,i){var a=this;this.commands=t,this.state=e,this.datastore=n,this.userLocator=r,this.translateService=i,this.subs=[],this.subs.push(this.getCancelInteraction().subscribe(function(){return a.toggleAddCommentMode(!1)}));var o=this.state.changes("CurrentDiagram").pipe(Object(d.a)(function(t){a.diagramId=t,a.unresolvedComments=a.getUnresolvedComments(),a.resolvedComments=a.getResolvedComments(),a.showDefaultMessage=a.shouldShowDefaultMessage(),a.resolvedLabel=a.getResolvedLabel()})).subscribe();this.subs.push(o)}return t.prototype.handleResolvedCommentItemClick=function(t){a.db.track("right.comment.click"),this.commands.dispatch(b.a.focusToPoint,{shapeIds:[t.shapeId],coordinates:t.locOnDiagram});var e={visible:!0,threadId:t.id,comments:[t]};this.state.set("CommentThreadData",e)},t.prototype.updateSelectedProperty=function(t){return this.state.changes("CommentThreadData").pipe(Object(l.a)(function(e){return e.visible?t.map(function(t){return t.parentComment.id===e.threadId?t.selected=!0:t.selected=!1,t}):t.map(function(t){return t.selected=!1,t})}))},t.prototype.shouldShowDefaultMessage=function(){return Object(c.b)(this.unresolvedComments,this.resolvedComments).pipe(Object(l.a)(function(t){var e=r.h(t,2),n=e[0],i=e[1];return 0===n.length&&0===i.length}))},t.prototype.getResolvedComments=function(){var t=this;return this.datastore.find(i.a,{diagramId:this.diagramId,$or:[{deleted:null},{deleted:!1}],parentId:null,resolved:{$exists:!0}}).pipe(Object(h.a)(function(e){return t.getCommentList(e)}),Object(h.a)(function(e){return e.length>0?t.updateCommentWithResolvedUser(e):Object(u.a)([])}))},t.prototype.updateCommentWithResolvedUser=function(t){var e=this;return c.b.apply(void 0,r.j(t.map(function(t){return e.userLocator.getUserInfo(t.parentComment.resolvedBy).pipe(Object(f.a)(function(t){return!!t}),Object(g.a)(1),Object(l.a)(function(e){return t.resolvedCommentor=e,t}))})))},t.prototype.getUnresolvedComments=function(){var t=this;return this.datastore.find(i.a,{diagramId:this.diagramId,parentId:null,$and:[{$or:[{resolved:null},{resolved:!1}]},{$or:[{deleted:null},{deleted:!1}]}]}).pipe(Object(h.a)(function(e){return t.getCommentList(e)}),Object(h.a)(function(e){return t.updateSelectedProperty(e)}))},t.prototype.getCommentList=function(t){var e=this;return t&&t.length>0?c.b.apply(void 0,r.j(t.map(function(t){return e.getCommentItem(t)}))).pipe(Object(l.a)(function(t){return Object(y.orderBy)(t,["lastUpdatedTime"],["desc"])})):Object(u.a)([])},t.prototype.getCommentItem=function(t){var e=this;return this.datastore.find(i.a,{diagramId:this.diagramId,$or:[{deleted:null},{deleted:!1}],parentId:t.id},{sort:{lastUpdated:1}}).pipe(Object(h.a)(function(n){n.unshift(t);var i=e.getCommenterIds(n,2);return c.b.apply(void 0,r.j(i.map(function(t){return e.userLocator.getUserInfo(t).pipe(Object(f.a)(function(t){return!!t}),Object(g.a)(1))}))).pipe(Object(l.a)(function(r){return e.buildCommentItem(r[r.length-1],r[r.length-2],n.length,t,n[n.length-1],n[n.length-1].lastUpdated)}))}))},t.prototype.buildCommentItem=function(t,e,n,r,i,a){var o={threadCommenter:t,commentCount:n,latestComment:i,parentComment:r,lastUpdatedTime:a,selected:!1};return i.parentId||(i.parentId=null),e&&(o.previousThreadCommenter=e),o},t.prototype.getCommenterIds=function(t,e){var n,i,a=[];try{for(var o=r.k(t),s=o.next();!s.done;s=o.next()){var c=s.value;if(a.includes(c.userId)||a.push(c.userId),a.length>=e)break}}catch(u){n={error:u}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}return a},t.prototype.onActive=function(){a.db.track("right.styles.panel.click",{value1Type:"status",value1:"open"})},t.prototype.onInactive=function(){a.db.track("right.styles.panel.click",{value1Type:"status",value1:"close"}),this.toggleAddCommentMode(!1)},Object.defineProperty(t,"openForContextAware",{get:function(){return"onlyAll"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return"diagramcomments"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"icon",{get:function(){return"comment"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tooltip",{get:function(){return this.translateService.instant("TOOLTIPS.DIAGRAM_COMMENTS")},enumerable:!0,configurable:!0}),t.prototype.toggleAddCommentMode=function(t){var e;t?(a.db.track("comments.buttons.add_comment.click"),e={state:s.b.Comment}):e={state:s.b.Normal},this.commands.dispatch(o.a.changeMouseControlState,null,e)},t.prototype.getCancelInteraction=function(){return Object(p.a)(window,"keydown").pipe(Object(f.a)(function(t){return t.keyCode===m.e.Escape}))},t.prototype.ngOnDestroy=function(){for(;this.subs.length>0;)this.subs.pop().unsubscribe()},t.prototype.getResolvedLabel=function(){var t=this;return this.resolvedComments.pipe(Object(h.a)(function(e){return t.translate("COMMENTS.LABELS.RESOLVED",{noOfThreads:e.length})}))},t.prototype.translate=function(t,e){return this.translateService.get(t,e).pipe(Object(g.a)(1))},t}()},TQyE:function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n("R+ki"),i=n("fQLH"),a=n("LiEJ"),o=n("d9YI"),s=n("nsO7"),c=function(){function t(){this._change=new i.a,this._isDiffColor=new a.a(!1),this._label=new a.a("")}return Object.defineProperty(t.prototype,"data",{get:function(){return this._data},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"change",{get:function(){return this._change.pipe(Object(r.a)(100))},enumerable:!0,configurable:!0}),t.prototype.setData=function(t){this._data=Object(s.clone)(t),void 0!==this._data.params&&(this._data.params.isDiffColor?(this._data.value="#FFFFFF",this._isDiffColor.next(!0)):this._isDiffColor.next(!1))},t.prototype.setProperties=function(t){this._props=t},t.prototype.apply=function(){this.colorpicker.nativeElement.style.backgroundColor=this._data.value,this._label.next(this._props.label)},t.prototype.applyAnimated=function(){return this.apply(),Object(o.b)()},t}()},c3EF:function(t,e,n){"use strict";var r=!("undefined"==typeof window||!window.document||!window.document.createElement),i={canUseDOM:r,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:r&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:r&&!!window.screen,isInWorker:!r};t.exports=i},deqJ:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("D57K"),i=n("h1tj"),a=function(t){function e(e,n){var r=t.call(this)||this;return r._type=n,r.name=e,r}return r.d(e,t),e.prototype.getCursor=function(t){return null},Object.defineProperty(e.prototype,"type",{get:function(){return this._type},enumerable:!0,configurable:!0}),e.prototype.convertToCursorDrawable=function(t){var e=this;t.getCursor=function(t){return e.getCursor(t)}},e}(i.Container)},elRR:function(t,e,n){"use strict";n.d(e,"a",function(){return h});var r=n("D57K"),i=n("SKSx"),a=(n("Wpmq"),n("U3QC")),o=n("hOK2"),s=n("W/Ou"),c=n("Jg5f"),u=n("lqvn"),p=n("gQst"),d=n("iUUs"),l=(n("5xGT"),n("LLEj")),h=(n("6GT9"),function(t){function e(e,n,r,i){var a=t.call(this,e,n)||this;return a.commandService=e,a.vToDcoordinate=n,a.state=r,a.postmsg=i,a}return r.d(e,t),e.prototype.initialize=function(e,n,r){var i=this,o=t.prototype.initialize.call(this,e,n,r),s=this.getStageDrag(n).pipe(Object(a.a)(function(t){return i.updatePan(t.nativeEvent.movementX,t.nativeEvent.movementY)})),c=this.getStageMouseDown(e).pipe(Object(a.a)(function(t){i.hideComments()})),u=this.getShapeTouch().pipe(Object(a.a)(function(t){i.postmsg.sendToParent("shape:touch",{shapeId:t.currentTarget.name})}));return Object(p.a)(o,u,s,c)},e.prototype.getStageMouseDown=function(t){return Object(d.a)(t,"stagemousedown")},e.prototype.hideComments=function(){this.state.set("CommentThreadData",{visible:!1})},e.prototype.getCursor=function(){var t=this;return this.pointerMove().pipe(Object(o.a)(100),Object(s.a)({x:this.interactionCanvas.getMouseX(),y:this.interactionCanvas.getMouseY()}),Object(c.a)(function(e){var n=t.getObjectsUnderPoint(e).filter(function(t){return t instanceof i.b});return t.getCursorByContext(n,[])}),Object(u.a)(function(t,e){return t.cursor===e.cursor&&t.tail===e.tail}))},Object.defineProperty(e.prototype,"defaultCursor",{get:function(){return{cursor:"move",tail:null,type:"css"}},enumerable:!0,configurable:!0}),e.prototype.shapeTouched=function(t){},e}(l.a));Object.defineProperty(h,"name",{value:"ViewerInteractionHandler"})},flPR:function(t,e,n){"use strict";n.d(e,"a",function(){return m}),n.d(e,"b",function(){return y});var r=n("D57K"),i=n("5xGT"),a=n("iUUs"),o=n("gQst"),s=n("wk5G"),c=n("ZJHl"),u=n("12aA"),p=n("Jg5f"),d=n("cGAd"),l=n("hOK2"),h=n("AouM"),f=n("R+ki"),g=n("W/Ou");function m(){return function(t){}}var y=function(){function t(t){this.state=t,this.subs=[]}return t.prototype.add=function(){var t=this.createAddSource().pipe(Object(c.a)());return this.subs.push(t.connect()),t},t.prototype.remove=function(){var t=this.createRemoveSource().pipe(Object(c.a)());return this.subs.push(t.connect()),t},t.prototype.change=function(){var t=this.createChangeSource().pipe(Object(c.a)());return this.subs.push(t.connect()),t},t.prototype.destroy=function(){for(;this.subs.length>0;)this.subs.pop().unsubscribe();this.indicatorLayer=void 0},t.prototype.duringInteractions=function(t,e){return Object(o.a)(this.duringSelectionInteraction(t,e),this.duringPan(t,e),this.duringTextEdit(t,e))},t.prototype.duringSelectionInteraction=function(t,e){return Object(o.a)(Object(a.a)(this.indicatorLayer,s.b.interactionStart).pipe(Object(u.a)(e)),Object(o.a)(Object(a.a)(this.indicatorLayer,s.b.interactionEnd),Object(a.a)(this.indicatorLayer,s.b.interactionCancel)).pipe(Object(u.a)(t)))},t.prototype.duringTextEdit=function(t,e){return this.state.changes("EditingText").pipe(Object(p.a)(function(n){return!1===n.open?t:e}))},t.prototype.duringPan=function(t,e){var n=this.state.changes("DiagramPan").pipe(Object(d.a)(1));return n.pipe(Object(l.a)(200),Object(h.a)(function(){return n.pipe(Object(f.a)(100),Object(u.a)(t),Object(g.a)(e))}))},t}();!function(t){function e(){return null!==t&&t.apply(this,arguments)||this}r.d(e,t)}(i.bb)},hSRu:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("Jg5f"),i=n("LiEJ"),a=n("d9YI"),o=n("fQLH"),s=(n("NNJu"),function(){function t(){this._data=new i.a(null),this.change=new o.a}return Object.defineProperty(t.prototype,"data",{get:function(){return this._data.value},set:function(t){this._data.next(t)},enumerable:!0,configurable:!0}),t.prototype.setData=function(t){this.data=t},t.prototype.setProperties=function(t){this.props=t},t.prototype.ngAfterViewInit=function(){var t=this;this.absDropdown.changed.subscribe(function(e){var n=t.data.value.find(function(t){return t.id===e[0]});t.change.next(n)})},t.prototype.select=function(t){},t.prototype.apply=function(){},t.prototype.applyAnimated=function(){return Object(a.b)()},Object.defineProperty(t.prototype,"dropdownType",{get:function(){var t=this.data.value.find(function(t){return t.selected});return t?t.buttonIcon?"icon":"text":this.props.icon?"icon":"text"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"defaultItems",{get:function(){return this._data.pipe(Object(r.a)(function(t){return t.value.filter(function(t){return!t.custom})}))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"customItems",{get:function(){return this._data.pipe(Object(r.a)(function(t){return t.value.filter(function(t){return t.custom})}))},enumerable:!0,configurable:!0}),t}())},ljsB:function(t,e,n){"use strict";var r=n("D57K"),i=n("5xGT"),a=function(t){function e(){return t.call(this)||this}return r.d(e,t),Object.defineProperty(e,"dataDefinition",{get:function(){return{link:!0}},enumerable:!0,configurable:!0}),e.prototype.execute=function(){return window.open(this.data.link,"_blank"),!0},e=r.c([Object(i.l)(),r.f("design:paramtypes",[])],e)}(i.a);Object.defineProperty(a,"name",{value:"HyperlinkNavigate"});var o=n("S83/"),s=n("h1tj"),c=n("Jg5f"),u=function(t){function e(e){var n=t.call(this)||this;return n.state=e,n}return r.d(e,t),Object.defineProperty(e,"dataDefinition",{get:function(){return{x:!0,y:!0,dx:!1,dy:!1,currentX:!1,currentY:!1,animate:!1}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"implements",{get:function(){return["IStateChangeCommand"]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"states",{get:function(){return{DiagramPan:this.data.panStateData}},enumerable:!0,configurable:!0}),e.prototype.prepareData=function(){var t=this.state.get("DiagramPan");this.data.currentX=t.x,this.data.currentY=t.y,this.calculateXY(),!1===this.data.animate?this.data.panStateData=this.extractStateData(this.data):this.data.panStateData=this.simulateAnimation()},e.prototype.calculateXY=function(){void 0!==this.data.dx&&(this.data.x=this.data.currentX+this.data.dx),void 0!==this.data.dy&&(this.data.y=this.data.currentY+this.data.dy)},e.prototype.simulateAnimation=function(){var t=this;return o.a.simulate({x:this.data.currentX,y:this.data.currentY}).to({x:this.data.x,y:this.data.y},300,s.Ease.sineOut).changes().pipe(Object(c.a)(function(e){return t.extractStateData({x:e.x,y:e.y})}))},e.prototype.extractStateData=function(t){var e=t.x,n=t.y;return new s.Point(e,n)},e.prototype.execute=function(){return!0},e=r.c([Object(i.l)(),r.f("design:paramtypes",[i.bb])],e)}(i.a);Object.defineProperty(u,"name",{value:"PanDiagram"});var p=function(t){function e(e){var n=t.call(this)||this;return n.state=e,n}return r.d(e,t),Object.defineProperty(e,"dataDefinition",{get:function(){return{level:!0,currentLevel:!1,toX:!1,toY:!1,toCenter:!1,currentPan:!1,delta:!1,animate:!1}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"implements",{get:function(){return["IStateChangeCommand"]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"states",{get:function(){return this.data.panStateData?{DiagramZoomLevel:this.data.zoomStateData,DiagramPan:this.data.panStateData}:{DiagramZoomLevel:this.data.zoomStateData}},enumerable:!0,configurable:!0}),e.prototype.prepareData=function(){this.setZoomLevel(),this.setPan();var t=void 0!==this.data.toX&&void 0!==this.data.toY;if(!1===this.data.animate)this.data.zoomStateData=this.data.level,t&&(this.data.panStateData=this.getPan());else{var e=this.simulateAnimation();this.data.zoomStateData=e.pipe(Object(c.a)(function(t){return t.level})),t&&(this.data.panStateData=e.pipe(Object(c.a)(function(t){return new s.Point(t.x,t.y)})))}},e.prototype.getPan=function(){var t=this.data.level/this.data.currentLevel,e=(this.data.currentPan.x-this.data.toX)*t+this.data.toX,n=(this.data.currentPan.y-this.data.toY)*t+this.data.toY;return new s.Point(e,n)},e.prototype.setPan=function(){this.data.currentPan=this.state.get("DiagramPan");var t=this.state.get("DiagramViewPort");this.data.toCenter&&(this.data.toX=t.centerX,this.data.toY=t.centerY)},e.prototype.setZoomLevel=function(){this.data.currentLevel=this.state.get("DiagramZoomLevel"),!this.data.level&&this.data.delta>0&&(this.data.level=this.data.currentLevel*this.data.delta)},e.prototype.simulateAnimation=function(){var t=this.getPan();return o.a.simulate({level:this.data.currentLevel,x:this.data.currentPan.x,y:this.data.currentPan.y}).to({level:this.data.level,x:t.x,y:t.y},300,s.Ease.sineOut).changes()},e.prototype.execute=function(){return!0},e=r.c([Object(i.l)(),r.f("design:paramtypes",[i.bb])],e)}(i.a);Object.defineProperty(p,"name",{value:"ZoomDiagram"});var d=n("QoSw"),l=n("w1VY"),h=function(t){function e(e,n,r){var i=t.call(this)||this;return i.state=e,i.ll=n,i.diagramToViewPort=r,i}return r.d(e,t),Object.defineProperty(e,"dataDefinition",{get:function(){return{coordinates:!1,shapeIds:!1}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"implements",{get:function(){return["IStateChangeCommand"]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"states",{get:function(){return{DiagramPan:this.data.panStateData}},enumerable:!0,configurable:!0}),e.prototype.prepareData=function(){this.data.shapeIds&&this.data.shapeIds[0]?this.data.panStateData=this.panToShape(this.data.shapeIds[0]):this.data.coordinates&&(this.data.panStateData=this.calculatePan(this.data.coordinates))},Object.defineProperty(e.prototype,"locator",{get:function(){return this.ll.forCurrent(!0)},enumerable:!0,configurable:!0}),e.prototype.panToShape=function(t){var e=this;return this.locator.getShapeOnce(t).pipe(Object(c.a)(function(t){var n=t.bounds,r={x:n.centerX,y:n.centerY};return e.calculatePan(r)}))},e.prototype.calculatePan=function(t){var e=this.state.get("DiagramViewPort"),n=this.diagramToViewPort.x(t.x),r=this.diagramToViewPort.y(t.y),i=this.state.get("DiagramPan");return{x:i.x-(n-e.centerX),y:i.y-(r-e.centerY)}},e.prototype.execute=function(){return!0},e=r.c([Object(i.l)(),r.f("design:paramtypes",[i.bb,d.a,l.a])],e)}(i.a);Object.defineProperty(h,"name",{value:"FocusToPoint"}),n.d(e,"a",function(){return f});var f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.d(e,t),e.register=function(t){t.map(e.zoomDiagram).add(p),t.map(e.panDiagram).add(u),t.map(e.focusToPoint).add(h),t.map(e.hyperlinkNavigate).add(a),t.mapSequence(e.zoomAndPanDiagram).add(p).add(u,{transform:function(t){return{x:t.data[0].x,y:t.data[0].y}}})},e.zoomDiagram=new e("ZoomDiagram"),e.panDiagram=new e("PanDiagram"),e.zoomAndPanDiagram=new e("ZoomAndPanDiagram"),e.focusToPoint=new e("FocusToPoint"),e.hyperlinkNavigate=new e("HyperlinkNavigate"),e}(i.o)},myrl:function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n("TQyE"),i=n("fQLH"),a=n("LiEJ"),o=n("d9YI"),s=n("nsO7"),c=function(){function t(t,e){this.resolver=t,this.injector=e,this.currentColorPickerComponents={},this.currentDataItemIds=[],this.componentRefreshRequired=!1,this.colorPickerSubscriptions=[],this._change=new i.a,this.valueSource=new a.a("")}return Object.defineProperty(t.prototype,"data",{get:function(){return this._data},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"change",{get:function(){return this._change},enumerable:!0,configurable:!0}),t.prototype.setData=function(t){var e=t.map(function(t){return t.id});this.currentDataItemIds.length>0?Object(s.isEqual)(this.currentDataItemIds.sort(),e.sort())?this.componentRefreshRequired=!1:(this.componentRefreshRequired=!0,this.currentDataItemIds=e):(this.currentDataItemIds=e,this.componentRefreshRequired=!0),this._data=t},t.prototype.setProperties=function(t){this._props=t},t.prototype.apply=function(){var t=this;this.componentRefreshRequired?(this.currentColorPickerComponents={},this.colorPickerSubscriptions.forEach(function(t){t.unsubscribe()}),this.colorPickerSubscriptions=[],this.singleColorPickerSection.clear(),this._data.forEach(function(e){var n=t.getColorPicker(e);n.instance.apply(),n.changeDetectorRef.markForCheck();var r=n.instance.change.subscribe(function(n){t._change.next({item:e,change:n})});t.colorPickerSubscriptions.push(r)})):this._data.forEach(function(e){t.getColorPicker(e).instance.apply()})},t.prototype.applyAnimated=function(){return this.apply(),Object(o.b)()},t.prototype.createColorPicker=function(t){var e=this.resolver.resolveComponentFactory(r.a);return this.singleColorPickerSection.createComponent(e)},t.prototype.getColorPicker=function(t){this.currentColorPickerComponents[t.id]||(this.currentColorPickerComponents[t.id]=this.createColorPicker(t.id));var e=this.currentColorPickerComponents[t.id];return e.instance.setProperties({label:t.label}),e.instance.setData({value:t.style.fillColor?t.style.fillColor:t.style.lineColor}),e},t}()},"pt/I":function(t,e,n){"use strict";n.d(e,"a",function(){return f});var r=n("D57K"),i=n("gQst"),a=n("iUUs"),o=n("U3QC"),s=n("4HYP"),c=n("AouM"),u=n("mhnT"),p=n("z5yO"),d=n("LLEj"),l=n("O6K7"),h=n("D1Hy"),f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.d(e,t),Object.defineProperty(e.prototype,"defaultCursor",{get:function(){return{cursor:"comment",tail:null,type:"cur"}},enumerable:!0,configurable:!0}),e.prototype.initialize=function(e,n,r){var a=this,s=t.prototype.initialize.call(this,e,n,r),c=this.getStagePressUp(this.gridCanvas).pipe(Object(o.a)(function(t){return a.addComment(t)})),u=this.getClickOnShape().pipe(Object(o.a)(function(t){return a.addComment(t)}));return Object(i.a)(s,c,u)},e.prototype.getClickOnShape=function(){var t=this;return this.getShapes().pipe(Object(s.a)(function(e){return Object(a.a)(e,"mousedown").pipe(Object(c.a)(function(){return Object(a.a)(e,"pressup").pipe(Object(u.a)(Object(a.a)(e,"pressmove")))}),Object(u.a)(Object(a.a)(t.diagramCanvas,"childRemoved").pipe(Object(p.a)(function(t){return t.child===e}))))}))},e.prototype.addComment=function(t){h.a.track("comments.add_comment.pin_dropped.oncanvas");var e=new l.a(l.b.CreateComment,t);this.interactionCanvas.dispatchEvent(e)},e}(d.a)},wk5G:function(t,e,n){"use strict";n.d(e,"b",function(){return r}),n.d(e,"a",function(){return o});var r,i=n("D57K"),a=n("h1tj");!function(t){t.interactionStart="interaction-start",t.interaction="interaction",t.interactionImmediate="interaction-immediate",t.interactionEnd="interaction-end",t.interactionCancel="interaction-cancel"}(r||(r={}));var o=function(t){function e(e,n,r,i,a){var o=t.call(this,e,!0,!0)||this;return o.type=e,o.handle=r,o.targetOver=i,o.relatedEvent=a,o.interactionName=n,o}return i.d(e,t),e}(a.Event)},yhNa:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("fQLH"),i=n("LiEJ"),a=n("d9YI"),o=function(){function t(){this._change=new r.a,this.valueSource=new i.a("")}return Object.defineProperty(t.prototype,"data",{get:function(){return this._data},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"change",{get:function(){return this._change.asObservable()},enumerable:!0,configurable:!0}),t.prototype.setData=function(t){this._data=t},t.prototype.setProperties=function(t){this._props=t},t.prototype.apply=function(){this.valueSource.next(this._data.value)},t.prototype.applyAnimated=function(){return this.apply(),Object(a.b)()},t}()}}]);